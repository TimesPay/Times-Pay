{"version":3,"sources":["createBottomTabNavigator.tsx"],"names":["React","View","StyleSheet","ScreenContainer","createTabNavigator","BottomTabBar","ResourceSavingScene","TabNavigationView","state","loaded","props","navigation","index","_getButtonComponent","route","descriptors","descriptor","key","options","tabBarButtonComponent","undefined","_renderTabBar","tabBarComponent","TabBarComponent","tabBarOptions","screenProps","getLabelText","getAccessibilityLabel","getAccessibilityRole","getAccessibilityStates","getTestID","renderIcon","onTabPress","onTabLongPress","routes","tabBarVisible","_jumpTo","onIndexChange","findIndex","renderScene","lazy","styles","container","pages","map","includes","isFocused","absoluteFill","nextProps","prevState","PureComponent","defaultProps","focused","create","flex","overflow"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport {\n  View,\n  StyleSheet,\n  AccessibilityRole,\n  AccessibilityState,\n} from 'react-native';\nimport { NavigationRoute } from 'react-navigation';\n\n// eslint-disable-next-line import/no-unresolved\nimport { ScreenContainer } from 'react-native-screens';\n\nimport createTabNavigator, {\n  NavigationViewProps,\n} from '../utils/createTabNavigator';\nimport BottomTabBar from '../views/BottomTabBar';\nimport ResourceSavingScene from '../views/ResourceSavingScene';\nimport {\n  NavigationTabProp,\n  NavigationBottomTabOptions,\n  BottomTabBarOptions,\n  SceneDescriptorMap,\n} from '../types';\n\ntype Config = {\n  lazy?: boolean;\n  tabBarComponent?: React.ComponentType<any>;\n  tabBarOptions?: BottomTabBarOptions;\n};\n\ntype Props = NavigationViewProps &\n  Config & {\n    getAccessibilityRole: (props: {\n      route: NavigationRoute;\n    }) => AccessibilityRole | undefined;\n    getAccessibilityStates: (props: {\n      route: NavigationRoute;\n      focused: boolean;\n    }) => AccessibilityState[];\n    navigation: NavigationTabProp;\n    descriptors: SceneDescriptorMap;\n    screenProps?: unknown;\n  };\n\ntype State = {\n  loaded: number[];\n};\n\nclass TabNavigationView extends React.PureComponent<Props, State> {\n  static defaultProps = {\n    lazy: true,\n    getAccessibilityRole: (): AccessibilityRole => 'button',\n    getAccessibilityStates: ({\n      focused,\n    }: {\n      focused: boolean;\n    }): AccessibilityState[] => (focused ? ['selected'] : []),\n  };\n\n  static getDerivedStateFromProps(nextProps: Props, prevState: State) {\n    const { index } = nextProps.navigation.state;\n\n    return {\n      // Set the current tab to be loaded if it was not loaded before\n      loaded: prevState.loaded.includes(index)\n        ? prevState.loaded\n        : [...prevState.loaded, index],\n    };\n  }\n\n  state = {\n    loaded: [this.props.navigation.state.index],\n  };\n\n  _getButtonComponent = ({ route }: { route: NavigationRoute }) => {\n    const { descriptors } = this.props;\n    const descriptor = descriptors[route.key];\n    const options = descriptor.options;\n\n    if (options.tabBarButtonComponent) {\n      return options.tabBarButtonComponent;\n    }\n\n    return undefined;\n  };\n\n  _renderTabBar = () => {\n    const {\n      tabBarComponent: TabBarComponent = BottomTabBar,\n      tabBarOptions,\n      navigation,\n      screenProps,\n      getLabelText,\n      getAccessibilityLabel,\n      getAccessibilityRole,\n      getAccessibilityStates,\n      getTestID,\n      renderIcon,\n      onTabPress,\n      onTabLongPress,\n    } = this.props;\n\n    const { descriptors } = this.props;\n    const { state } = this.props.navigation;\n    const route = state.routes[state.index];\n    const descriptor = descriptors[route.key];\n    const options = descriptor.options;\n\n    if (options.tabBarVisible === false) {\n      return null;\n    }\n\n    return (\n      <TabBarComponent\n        {...tabBarOptions}\n        jumpTo={this._jumpTo}\n        navigation={navigation}\n        screenProps={screenProps}\n        onTabPress={onTabPress}\n        onTabLongPress={onTabLongPress}\n        getLabelText={getLabelText}\n        getButtonComponent={this._getButtonComponent}\n        getAccessibilityLabel={getAccessibilityLabel}\n        getAccessibilityRole={getAccessibilityRole}\n        getAccessibilityStates={getAccessibilityStates}\n        getTestID={getTestID}\n        renderIcon={renderIcon}\n      />\n    );\n  };\n\n  _jumpTo = (key: string) => {\n    const { navigation, onIndexChange } = this.props;\n\n    const index = navigation.state.routes.findIndex(route => route.key === key);\n\n    onIndexChange(index);\n  };\n\n  render() {\n    const { navigation, renderScene, lazy } = this.props;\n    const { routes } = navigation.state;\n    const { loaded } = this.state;\n\n    return (\n      <View style={styles.container}>\n        <ScreenContainer style={styles.pages}>\n          {routes.map((route, index) => {\n            if (lazy && !loaded.includes(index)) {\n              // Don't render a screen if we've never navigated to it\n              return null;\n            }\n\n            const isFocused = navigation.state.index === index;\n\n            return (\n              <ResourceSavingScene\n                key={route.key}\n                style={StyleSheet.absoluteFill}\n                isVisible={isFocused}\n              >\n                {renderScene({ route })}\n              </ResourceSavingScene>\n            );\n          })}\n        </ScreenContainer>\n        {this._renderTabBar()}\n      </View>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    overflow: 'hidden',\n  },\n  pages: {\n    flex: 1,\n  },\n});\n\nexport default createTabNavigator<Config, NavigationBottomTabOptions, Props>(\n  TabNavigationView\n);\n"]}