import _objectSpread from"@babel/runtime/helpers/objectSpread";import _extends from"@babel/runtime/helpers/extends";import _objectWithoutProperties from"@babel/runtime/helpers/objectWithoutProperties";import _classCallCheck from"@babel/runtime/helpers/classCallCheck";import _createClass from"@babel/runtime/helpers/createClass";import _possibleConstructorReturn from"@babel/runtime/helpers/possibleConstructorReturn";import _getPrototypeOf from"@babel/runtime/helpers/getPrototypeOf";import _inherits from"@babel/runtime/helpers/inherits";var _jsxFileName="/Users/satya/Workspace/Callstack/react-navigation-tabs/src/views/BottomTabBar.tsx";import React from'react';import{Animated,TouchableWithoutFeedback,StyleSheet,View,Keyboard,Platform}from'react-native';import SafeAreaView from'react-native-safe-area-view';import{ThemeColors,ThemeContext}from'react-navigation';import CrossFadeIcon from'./CrossFadeIcon';import withDimensions from'../utils/withDimensions';var majorVersion=parseInt(Platform.Version,10);var isIos=Platform.OS==='ios';var isIOS11=majorVersion>=11&&isIos;var DEFAULT_MAX_TAB_ITEM_WIDTH=125;var DEFAULT_KEYBOARD_ANIMATION_CONFIG={show:{animation:'timing',config:{useNativeDriver:true,duration:150}},hide:{animation:'timing',config:{useNativeDriver:true,duration:100}}};var TouchableWithoutFeedbackWrapper=function(_React$Component){_inherits(TouchableWithoutFeedbackWrapper,_React$Component);function TouchableWithoutFeedbackWrapper(){_classCallCheck(this,TouchableWithoutFeedbackWrapper);return _possibleConstructorReturn(this,_getPrototypeOf(TouchableWithoutFeedbackWrapper).apply(this,arguments));}_createClass(TouchableWithoutFeedbackWrapper,[{key:"render",value:function render(){var _this$props=this.props,route=_this$props.route,focused=_this$props.focused,onPress=_this$props.onPress,onLongPress=_this$props.onLongPress,testID=_this$props.testID,accessibilityLabel=_this$props.accessibilityLabel,accessibilityRole=_this$props.accessibilityRole,accessibilityStates=_this$props.accessibilityStates,rest=_objectWithoutProperties(_this$props,["route","focused","onPress","onLongPress","testID","accessibilityLabel","accessibilityRole","accessibilityStates"]);return React.createElement(TouchableWithoutFeedback,{onPress:onPress,onLongPress:onLongPress,testID:testID,hitSlop:{left:15,right:15,top:0,bottom:5},accessibilityLabel:accessibilityLabel,accessibilityRole:accessibilityRole,accessibilityStates:accessibilityStates,__source:{fileName:_jsxFileName,lineNumber:70}},React.createElement(View,_extends({},rest,{__source:{fileName:_jsxFileName,lineNumber:79}})));}}]);return TouchableWithoutFeedbackWrapper;}(React.Component);var TabBarBottom=function(_React$Component2){_inherits(TabBarBottom,_React$Component2);function TabBarBottom(){var _getPrototypeOf2;var _this;_classCallCheck(this,TabBarBottom);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(TabBarBottom)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={layout:{height:0,width:0},keyboard:false,visible:new Animated.Value(1)};_this._getKeyboardAnimationConfigByType=function(type){var keyboardHidesTabBarAnimationConfig=_this.props.keyboardHidesTabBarAnimationConfig;var defaultKeyboardAnimationConfig=DEFAULT_KEYBOARD_ANIMATION_CONFIG[type];var keyboardAnimationConfig=keyboardHidesTabBarAnimationConfig&&keyboardHidesTabBarAnimationConfig[type]||defaultKeyboardAnimationConfig;if(keyboardAnimationConfig&&keyboardAnimationConfig.animation==='timing'){return _objectSpread({},defaultKeyboardAnimationConfig,keyboardAnimationConfig,{config:_objectSpread({},defaultKeyboardAnimationConfig.config,keyboardAnimationConfig.config)});}return keyboardAnimationConfig;};_this._handleKeyboardShow=function(){_this.setState({keyboard:true},function(){var _this$_getKeyboardAni=_this._getKeyboardAnimationConfigByType('show'),animation=_this$_getKeyboardAni.animation,config=_this$_getKeyboardAni.config;Animated[animation](_this.state.visible,_objectSpread({toValue:0},config)).start();});};_this._handleKeyboardHide=function(){var _this$_getKeyboardAni2=_this._getKeyboardAnimationConfigByType('hide'),animation=_this$_getKeyboardAni2.animation,config=_this$_getKeyboardAni2.config;Animated[animation](_this.state.visible,_objectSpread({toValue:1},config)).start(function(){_this.setState({keyboard:false});});};_this._handleLayout=function(e){var layout=_this.state.layout;var _e$nativeEvent$layout=e.nativeEvent.layout,height=_e$nativeEvent$layout.height,width=_e$nativeEvent$layout.width;if(height===layout.height&&width===layout.width){return;}_this.setState({layout:{height:height,width:width}});};_this._getActiveTintColor=function(){var activeTintColor=_this.props.activeTintColor;if(!activeTintColor){return;}else if(typeof activeTintColor==='string'){return activeTintColor;}return activeTintColor[_this.context];};_this._getInactiveTintColor=function(){var inactiveTintColor=_this.props.inactiveTintColor;if(!inactiveTintColor){return;}else if(typeof inactiveTintColor==='string'){return inactiveTintColor;}return inactiveTintColor[_this.context];};_this._getActiveBackgroundColor=function(){var activeBackgroundColor=_this.props.activeBackgroundColor;if(!activeBackgroundColor){return;}else if(typeof activeBackgroundColor==='string'){return activeBackgroundColor;}return activeBackgroundColor[_this.context];};_this._getInactiveBackgroundColor=function(){var inactiveBackgroundColor=_this.props.inactiveBackgroundColor;if(!inactiveBackgroundColor){return;}else if(typeof inactiveBackgroundColor==='string'){return inactiveBackgroundColor;}return inactiveBackgroundColor[_this.context];};_this._renderLabel=function(_ref){var route=_ref.route,focused=_ref.focused;var _this$props2=_this.props,labelStyle=_this$props2.labelStyle,showLabel=_this$props2.showLabel,showIcon=_this$props2.showIcon,allowFontScaling=_this$props2.allowFontScaling;if(showLabel===false){return null;}var activeTintColor=_this._getActiveTintColor();var inactiveTintColor=_this._getInactiveTintColor();var label=_this.props.getLabelText({route:route});var tintColor=focused?activeTintColor:inactiveTintColor;var horizontal=_this._shouldUseHorizontalLabels();if(typeof label==='string'){return React.createElement(Animated.Text,{numberOfLines:1,style:[styles.label,{color:tintColor},showIcon&&horizontal?styles.labelBeside:styles.labelBeneath,labelStyle],allowFontScaling:allowFontScaling,__source:{fileName:_jsxFileName,lineNumber:274}},label);}if(typeof label==='function'){return label({focused:focused,tintColor:tintColor,orientation:horizontal?'horizontal':'vertical'});}return label;};_this._renderIcon=function(_ref2){var route=_ref2.route,focused=_ref2.focused;var _this$props3=_this.props,renderIcon=_this$props3.renderIcon,showIcon=_this$props3.showIcon,showLabel=_this$props3.showLabel;if(showIcon===false){return null;}var horizontal=_this._shouldUseHorizontalLabels();var activeTintColor=_this._getActiveTintColor();var inactiveTintColor=_this._getInactiveTintColor();var activeOpacity=focused?1:0;var inactiveOpacity=focused?0:1;return React.createElement(CrossFadeIcon,{route:route,horizontal:horizontal,activeOpacity:activeOpacity,inactiveOpacity:inactiveOpacity,activeTintColor:activeTintColor,inactiveTintColor:inactiveTintColor,renderIcon:renderIcon,style:[styles.iconWithExplicitHeight,showLabel===false&&!horizontal&&styles.iconWithoutLabel,showLabel!==false&&!horizontal&&styles.iconWithLabel],__source:{fileName:_jsxFileName,lineNumber:321}});};_this._shouldUseHorizontalLabels=function(){var routes=_this.props.navigation.state.routes;var _this$props4=_this.props,isLandscape=_this$props4.isLandscape,dimensions=_this$props4.dimensions,adaptive=_this$props4.adaptive,tabStyle=_this$props4.tabStyle,labelPosition=_this$props4.labelPosition;if(labelPosition){var position;if(typeof labelPosition==='string'){position=labelPosition;}else{position=labelPosition({deviceOrientation:isLandscape?'horizontal':'vertical'});}if(position){return position==='beside-icon';}}if(!adaptive){return false;}if(Platform.isPad){var maxTabItemWidth=DEFAULT_MAX_TAB_ITEM_WIDTH;var flattenedStyle=StyleSheet.flatten(tabStyle);if(flattenedStyle){if(typeof flattenedStyle.width==='number'){maxTabItemWidth=flattenedStyle.width;}else if(typeof flattenedStyle.maxWidth==='number'){maxTabItemWidth=flattenedStyle.maxWidth;}}return routes.length*maxTabItemWidth<=dimensions.width;}else{return isLandscape;}};return _this;}_createClass(TabBarBottom,[{key:"componentDidMount",value:function componentDidMount(){if(Platform.OS==='ios'){Keyboard.addListener('keyboardWillShow',this._handleKeyboardShow);Keyboard.addListener('keyboardWillHide',this._handleKeyboardHide);}else{Keyboard.addListener('keyboardDidShow',this._handleKeyboardShow);Keyboard.addListener('keyboardDidHide',this._handleKeyboardHide);}}},{key:"componentWillUnmount",value:function componentWillUnmount(){if(Platform.OS==='ios'){Keyboard.removeListener('keyboardWillShow',this._handleKeyboardShow);Keyboard.removeListener('keyboardWillHide',this._handleKeyboardHide);}else{Keyboard.removeListener('keyboardDidShow',this._handleKeyboardShow);Keyboard.removeListener('keyboardDidHide',this._handleKeyboardHide);}}},{key:"render",value:function render(){var _this2=this;var _this$props5=this.props,navigation=_this$props5.navigation,keyboardHidesTabBar=_this$props5.keyboardHidesTabBar,onTabPress=_this$props5.onTabPress,onTabLongPress=_this$props5.onTabLongPress,safeAreaInset=_this$props5.safeAreaInset,style=_this$props5.style,tabStyle=_this$props5.tabStyle;var routes=navigation.state.routes;var isDark=this.context==='dark';var activeBackgroundColor=this._getActiveBackgroundColor();var inactiveBackgroundColor=this._getInactiveBackgroundColor();var _StyleSheet$flatten=StyleSheet.flatten(style||{}),position=_StyleSheet$flatten.position,top=_StyleSheet$flatten.top,_StyleSheet$flatten$l=_StyleSheet$flatten.left,left=_StyleSheet$flatten$l===void 0?0:_StyleSheet$flatten$l,_StyleSheet$flatten$b=_StyleSheet$flatten.bottom,bottom=_StyleSheet$flatten$b===void 0?0:_StyleSheet$flatten$b,_StyleSheet$flatten$r=_StyleSheet$flatten.right,right=_StyleSheet$flatten$r===void 0?0:_StyleSheet$flatten$r,margin=_StyleSheet$flatten.margin,marginTop=_StyleSheet$flatten.marginTop,marginLeft=_StyleSheet$flatten.marginLeft,marginBottom=_StyleSheet$flatten.marginBottom,marginRight=_StyleSheet$flatten.marginRight,marginHorizontal=_StyleSheet$flatten.marginHorizontal,marginVertical=_StyleSheet$flatten.marginVertical,innerStyle=_objectWithoutProperties(_StyleSheet$flatten,["position","top","left","bottom","right","margin","marginTop","marginLeft","marginBottom","marginRight","marginHorizontal","marginVertical"]);var containerStyle={position:position,top:top,left:left,bottom:bottom,right:right,margin:margin,marginTop:marginTop,marginLeft:marginLeft,marginBottom:marginBottom,marginRight:marginRight,marginHorizontal:marginHorizontal,marginVertical:marginVertical};var tabBarStyle=[styles.tabBar,isDark?styles.tabBarDark:styles.tabBarLight,this._shouldUseHorizontalLabels()&&!Platform.isPad?styles.tabBarCompact:styles.tabBarRegular,innerStyle];return React.createElement(Animated.View,{style:[styles.container,containerStyle,keyboardHidesTabBar?{transform:[{translateY:this.state.visible.interpolate({inputRange:[0,1],outputRange:[this.state.layout.height,0]})}],position:this.state.keyboard?'absolute':position}:null],pointerEvents:keyboardHidesTabBar&&this.state.keyboard?'none':'auto',onLayout:this._handleLayout,__source:{fileName:_jsxFileName,lineNumber:446}},React.createElement(SafeAreaView,{style:tabBarStyle,forceInset:safeAreaInset,__source:{fileName:_jsxFileName,lineNumber:472}},routes.map(function(route,index){var focused=index===navigation.state.index;var scene={route:route,focused:focused};var accessibilityLabel=_this2.props.getAccessibilityLabel({route:route});var accessibilityRole=_this2.props.getAccessibilityRole({route:route});var accessibilityStates=_this2.props.getAccessibilityStates(scene);var testID=_this2.props.getTestID({route:route});var backgroundColor=focused?activeBackgroundColor:inactiveBackgroundColor;var ButtonComponent=_this2.props.getButtonComponent({route:route})||TouchableWithoutFeedbackWrapper;return React.createElement(ButtonComponent,{key:route.key,route:route,focused:focused,onPress:function onPress(){return onTabPress({route:route});},onLongPress:function onLongPress(){return onTabLongPress({route:route});},testID:testID,accessibilityLabel:accessibilityLabel,accessibilityRole:accessibilityRole,accessibilityStates:accessibilityStates,style:[styles.tab,{backgroundColor:backgroundColor},_this2._shouldUseHorizontalLabels()?styles.tabLandscape:styles.tabPortrait,tabStyle],__source:{fileName:_jsxFileName,lineNumber:499}},_this2._renderIcon(scene),_this2._renderLabel(scene));})));}}]);return TabBarBottom;}(React.Component);TabBarBottom.defaultProps={keyboardHidesTabBar:true,keyboardHidesTabBarAnimationConfig:DEFAULT_KEYBOARD_ANIMATION_CONFIG,activeTintColor:{light:'#007AFF',dark:'#fff'},inactiveTintColor:{light:'#8e8e93',dark:'#7f7f7f'},activeBackgroundColor:'transparent',inactiveBackgroundColor:'transparent',showLabel:true,showIcon:true,allowFontScaling:true,adaptive:isIOS11,safeAreaInset:{bottom:'always',top:'never'}};TabBarBottom.contextType=ThemeContext;var DEFAULT_HEIGHT=49;var COMPACT_HEIGHT=29;var styles=StyleSheet.create({tabBar:{borderTopWidth:StyleSheet.hairlineWidth,flexDirection:'row'},tabBarLight:{backgroundColor:ThemeColors.light.header,borderTopColor:ThemeColors.light.headerBorder},tabBarDark:{backgroundColor:ThemeColors.dark.header,borderTopColor:ThemeColors.dark.headerBorder},container:{elevation:8},tabBarCompact:{height:COMPACT_HEIGHT},tabBarRegular:{height:DEFAULT_HEIGHT},tab:{flex:1,alignItems:isIos?'center':'stretch'},tabPortrait:{justifyContent:'flex-end',flexDirection:'column'},tabLandscape:{justifyContent:'center',flexDirection:'row'},iconWithoutLabel:{flex:1},iconWithLabel:{flex:1},iconWithExplicitHeight:{height:Platform.isPad?DEFAULT_HEIGHT:COMPACT_HEIGHT},label:{textAlign:'center',backgroundColor:'transparent'},labelBeneath:{fontSize:11,marginBottom:1.5},labelBeside:{fontSize:12,marginLeft:20}});export default withDimensions(TabBarBottom);
//# sourceMappingURL=BottomTabBar.js.map