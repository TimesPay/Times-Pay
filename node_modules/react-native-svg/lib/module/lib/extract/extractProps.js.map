{"version":3,"sources":["extractProps.ts"],"names":["extractFill","extractStroke","transformToMatrix","props2transform","extractResponder","extractOpacity","idPattern","clipRules","evenodd","nonzero","propsAndStyles","props","style","Array","isArray","Object","assign","getMarker","marker","undefined","matched","match","extractProps","ref","opacity","onLayout","id","clipPath","clipRule","mask","markerStart","markerMid","markerEnd","transform","styleProperties","transformProps","matrix","extracted","propList","name","String","console","warn","extract","instance","withoutXY","x","y"],"mappings":"w5BAAA,MAAOA,CAAAA,WAAP,KAAwB,eAAxB,CACA,MAAOC,CAAAA,aAAP,KAA0B,iBAA1B,CACA,OAASC,iBAAT,CAA4BC,eAA5B,KAAmD,oBAAnD,CACA,MAAOC,CAAAA,gBAAP,KAA6B,oBAA7B,CACA,MAAOC,CAAAA,cAAP,KAA2B,kBAA3B,CACA,OAASC,SAAT,KAA0B,SAA1B,CAWA,GAAMC,CAAAA,SAA+C,CAAG,CACtDC,OAAO,CAAE,CAD6C,CAEtDC,OAAO,CAAE,CAF6C,CAAxD,CAKA,MAAO,SAASC,CAAAA,cAAT,CAAwBC,KAAxB,CAA6D,IAC1DC,CAAAA,KAD0D,CAChDD,KADgD,CAC1DC,KAD0D,CAElE,MAAO,CAACA,KAAD,CACHD,KADG,kBAGGE,KAAK,CAACC,OAAN,CAAcF,KAAd,EAAuBG,MAAM,CAACC,MAAP,OAAAD,MAAM,EAAQ,EAAR,4BAAeH,KAAf,GAA7B,CAAqDA,KAHxD,IAIED,KAJF,CAAP,CAMD,CAED,QAASM,CAAAA,SAAT,CAAmBC,MAAnB,CAAoC,CAClC,GAAI,CAACA,MAAL,CAAa,CACX,MAAOC,CAAAA,SAAP,CACD,CACD,GAAMC,CAAAA,OAAO,CAAGF,MAAM,CAACG,KAAP,CAAaf,SAAb,CAAhB,CACA,MAAOc,CAAAA,OAAO,CAAGA,OAAO,CAAC,CAAD,CAAV,CAAgBD,SAA9B,CACD,CAED,cAAe,SAASG,CAAAA,YAAT,CACbX,KADa,CAiBbY,GAjBa,CAkBb,IAEEC,CAAAA,OAFF,CAaIb,KAbJ,CAEEa,OAFF,CAGEC,QAHF,CAaId,KAbJ,CAGEc,QAHF,CAIEC,EAJF,CAaIf,KAbJ,CAIEe,EAJF,CAKEC,QALF,CAaIhB,KAbJ,CAKEgB,QALF,CAMEC,QANF,CAaIjB,KAbJ,CAMEiB,QANF,CAOEC,IAPF,CAaIlB,KAbJ,CAOEkB,IAPF,CAQEX,MARF,CAaIP,KAbJ,CAQEO,MARF,oBAaIP,KAbJ,CASEmB,WATF,CASEA,WATF,6BASgBZ,MAThB,qCAaIP,KAbJ,CAUEoB,SAVF,CAUEA,SAVF,2BAUcb,MAVd,mCAaIP,KAbJ,CAWEqB,SAXF,CAWEA,SAXF,2BAWcd,MAXd,kBAYEe,SAZF,CAaItB,KAbJ,CAYEsB,SAZF,CAcA,GAAMC,CAAAA,eAAyB,CAAG,EAAlC,CACA,GAAMC,CAAAA,cAAc,CAAGhC,eAAe,CAACQ,KAAD,CAAtC,CACA,GAAMyB,CAAAA,MAAM,CAAGlC,iBAAiB,CAACiC,cAAD,CAAiBF,SAAjB,CAAhC,CACA,GAAMI,CAAAA,SAaL,gBACCD,MAAM,CAANA,MADD,EAEID,cAFJ,EAGCG,QAAQ,CAAEJ,eAHX,CAICV,OAAO,CAAEnB,cAAc,CAACmB,OAAD,CAJxB,EAKIpB,gBAAgB,CAACO,KAAD,CAAQY,GAAR,CALpB,IAMIvB,WAAW,CAACW,KAAD,CAAQuB,eAAR,CANf,IAOIjC,aAAa,CAACU,KAAD,CAAQuB,eAAR,CAPjB,CAbD,CAuBA,GAAIT,QAAJ,CAAc,CACZY,SAAS,CAACZ,QAAV,CAAqBA,QAArB,CACD,CAED,GAAIK,WAAJ,CAAiB,CACfO,SAAS,CAACP,WAAV,CAAwBb,SAAS,CAACa,WAAD,CAAjC,CACD,CACD,GAAIC,SAAJ,CAAe,CACbM,SAAS,CAACN,SAAV,CAAsBd,SAAS,CAACc,SAAD,CAA/B,CACD,CACD,GAAIC,SAAJ,CAAe,CACbK,SAAS,CAACL,SAAV,CAAsBf,SAAS,CAACe,SAAD,CAA/B,CACD,CAED,GAAIN,EAAJ,CAAQ,CACNW,SAAS,CAACE,IAAV,CAAiBC,MAAM,CAACd,EAAD,CAAvB,CACD,CAED,GAAIC,QAAJ,CAAc,CACZ,GAAIC,QAAJ,CAAc,CACZS,SAAS,CAACT,QAAV,CAAqBrB,SAAS,CAACqB,QAAD,CAAT,GAAwB,CAAxB,CAA4B,CAA5B,CAAgC,CAArD,CACD,CAED,GAAID,QAAJ,CAAc,CACZ,GAAMP,CAAAA,OAAO,CAAGO,QAAQ,CAACN,KAAT,CAAef,SAAf,CAAhB,CAEA,GAAIc,OAAJ,CAAa,CACXiB,SAAS,CAACV,QAAV,CAAqBP,OAAO,CAAC,CAAD,CAA5B,CACD,CAFD,IAEO,CACLqB,OAAO,CAACC,IAAR,CACE,sEACEf,QADF,CAEE,GAHJ,EAKD,CACF,CACF,CAED,GAAIE,IAAJ,CAAU,CACR,GAAMT,CAAAA,QAAO,CAAGS,IAAI,CAACR,KAAL,CAAWf,SAAX,CAAhB,CAEA,GAAIc,QAAJ,CAAa,CACXiB,SAAS,CAACR,IAAV,CAAiBT,QAAO,CAAC,CAAD,CAAxB,CACD,CAFD,IAEO,CACLqB,OAAO,CAACC,IAAR,CACE,8DACEb,IADF,CAEE,GAHJ,EAKD,CACF,CAED,MAAOQ,CAAAA,SAAP,CACD,CAED,MAAO,SAASM,CAAAA,OAAT,CAAiBC,QAAjB,CAAmCjC,KAAnC,CAAwE,CAC7E,MAAOW,CAAAA,YAAY,CAACZ,cAAc,CAACC,KAAD,CAAf,CAAwBiC,QAAxB,CAAnB,CACD,CAED,MAAO,SAASC,CAAAA,SAAT,CACLD,QADK,CAELjC,KAFK,CAGL,CACA,MAAOW,CAAAA,YAAY,kBAAMZ,cAAc,CAACC,KAAD,CAApB,EAA6BmC,CAAC,CAAE,IAAhC,CAAsCC,CAAC,CAAE,IAAzC,GAAiDH,QAAjD,CAAnB,CACD","sourcesContent":["import extractFill from './extractFill';\nimport extractStroke from './extractStroke';\nimport { transformToMatrix, props2transform } from './extractTransform';\nimport extractResponder from './extractResponder';\nimport extractOpacity from './extractOpacity';\nimport { idPattern } from '../util';\nimport {\n  ClipProps,\n  FillProps,\n  NumberProp,\n  ResponderProps,\n  StrokeProps,\n  TransformProps,\n} from './types';\nimport { Component } from 'react';\n\nconst clipRules: { evenodd: number; nonzero: number } = {\n  evenodd: 0,\n  nonzero: 1,\n};\n\nexport function propsAndStyles(props: Object & { style?: [] | {} }) {\n  const { style } = props;\n  return !style\n    ? props\n    : {\n        ...(Array.isArray(style) ? Object.assign({}, ...style) : style),\n        ...props,\n      };\n}\n\nfunction getMarker(marker?: string) {\n  if (!marker) {\n    return undefined;\n  }\n  const matched = marker.match(idPattern);\n  return matched ? matched[1] : undefined;\n}\n\nexport default function extractProps(\n  props: {\n    id?: string;\n    mask?: string;\n    marker?: string;\n    markerStart?: string;\n    markerMid?: string;\n    markerEnd?: string;\n    clipPath?: string;\n    opacity?: NumberProp;\n    onLayout?: () => void;\n    transform?: number[] | string | TransformProps;\n  } & TransformProps &\n    ResponderProps &\n    StrokeProps &\n    FillProps &\n    ClipProps,\n  ref: Object,\n) {\n  const {\n    opacity,\n    onLayout,\n    id,\n    clipPath,\n    clipRule,\n    mask,\n    marker,\n    markerStart = marker,\n    markerMid = marker,\n    markerEnd = marker,\n    transform,\n  } = props;\n  const styleProperties: string[] = [];\n  const transformProps = props2transform(props);\n  const matrix = transformToMatrix(transformProps, transform);\n  const extracted: {\n    name?: string;\n    mask?: string;\n    opacity: number;\n    matrix: number[];\n    propList: string[];\n    onLayout?: () => void;\n    ref?: (instance: Component | null) => void;\n    markerStart?: string;\n    markerMid?: string;\n    markerEnd?: string;\n    clipPath?: string;\n    clipRule?: number;\n  } = {\n    matrix,\n    ...transformProps,\n    propList: styleProperties,\n    opacity: extractOpacity(opacity),\n    ...extractResponder(props, ref),\n    ...extractFill(props, styleProperties),\n    ...extractStroke(props, styleProperties),\n  };\n\n  if (onLayout) {\n    extracted.onLayout = onLayout;\n  }\n\n  if (markerStart) {\n    extracted.markerStart = getMarker(markerStart);\n  }\n  if (markerMid) {\n    extracted.markerMid = getMarker(markerMid);\n  }\n  if (markerEnd) {\n    extracted.markerEnd = getMarker(markerEnd);\n  }\n\n  if (id) {\n    extracted.name = String(id);\n  }\n\n  if (clipPath) {\n    if (clipRule) {\n      extracted.clipRule = clipRules[clipRule] === 0 ? 0 : 1;\n    }\n\n    if (clipPath) {\n      const matched = clipPath.match(idPattern);\n\n      if (matched) {\n        extracted.clipPath = matched[1];\n      } else {\n        console.warn(\n          'Invalid `clipPath` prop, expected a clipPath like \"#id\", but got: \"' +\n            clipPath +\n            '\"',\n        );\n      }\n    }\n  }\n\n  if (mask) {\n    const matched = mask.match(idPattern);\n\n    if (matched) {\n      extracted.mask = matched[1];\n    } else {\n      console.warn(\n        'Invalid `mask` prop, expected a mask like \"#id\", but got: \"' +\n          mask +\n          '\"',\n      );\n    }\n  }\n\n  return extracted;\n}\n\nexport function extract(instance: Object, props: Object & { style?: [] | {} }) {\n  return extractProps(propsAndStyles(props), instance);\n}\n\nexport function withoutXY(\n  instance: Object,\n  props: Object & { style?: [] | {} },\n) {\n  return extractProps({ ...propsAndStyles(props), x: null, y: null }, instance);\n}\n"]}